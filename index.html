<html>
    <head>
        <title>APIFetcher-v1.0.0</title>
    </head>
    <body>
        
        <form action="#">
            <select name="apiname" id="apiname">
                <option value="default" selected> Choose API</option>
                <option value="payfone"> payfone </option>
                <option value="accountf">accountf</option>
                <option value="kyc">kyc</option>
                <option value="document">document</option>
            </select>
            <select name="apienv" id="apienv">
                <option value="default" selected>Choose Environment</option>
                <option value="dev">dev</option>
                <option value="sit">sit</option>
                <option value="oat">oat</option>
                <option value="vpt">vpt</option>
                <option value="lcp">lcp</option>
                <option value="prod">prod</option>
            </select>
            <button name="apisubmit" type="submit" onclick="loadData()">Fetch Details</button>
        </form>

        <textarea name="apijson" id="apijson">
            Your API Details show here.
        </textarea>

        <footer style="text-align: center; font-size: small;">
            Author: Mayank Singh Rathore
        </footer>
    </body>
    <script> 
        var apiArray = []; 
        //fetching data from apis.json and storing it in an array
        
        function loadData(){
            fetch("data/apis.json")
                .then(response => {
                return response.json();
            })
                //.then(jsondata => console.log(jsondata))
                .then(jsondata => {

                for(var i in jsondata)
                    apiArray.push([i, jsondata [i]]); 
                console.log(apiArray);

                findAPI(apiArray);
            });   
        }
        
	    
	    
	  
        function findAPI(arr){
		
		console.log('Filtered Array\n', arr)
		
		console.log(arr.find(api => {
   		return api.apiname == 'payfone'
		}))
		
		let filteredAPIs = arr.filter(filterAPIByID)
		console.log('Filtered Array\n', filteredAPIs)
		
        }
	    
	function filterAPIByID(api) {
		var apiNameSelect = document.getElementById("apiname");
		var apiName = apiNameSelect.options[apiNameSelect.selectedIndex];
		
		var apiEnvSelect = document.getElementById("apienv");
		var apiEnv = apiEnvSelect.options[apiEnvSelect.selectedIndex];
		
		console.log(apiName.text);
		console.log(apiEnv.text); 
		if (api.apiname == apiName && api.env == apiEnv) {
			return true
		}
		return false;
	}
        
        
        

        
        
        
    </script>
</html>
