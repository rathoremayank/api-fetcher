<html>
    <head>
        <title>APIFetcher-v1.0.0</title>
	    <style>body{ font-size : large }</style>
    </head>
    <body>
        
        <form action="#">
            <select name="apiname" id="apiname">
                <option value="default" selected> Choose API</option>
                <option value="payfone"> payfone </option>
                <option value="accountf">accountf</option>
                <option value="kyc">kyc</option>
                <option value="document">document</option>
            </select>
            <select name="apienv" id="apienv">
                <option value="default" selected>Choose Environment</option>
                <option value="dev">dev</option>
                <option value="sit">sit</option>
                <option value="oat">oat</option>
                <option value="vpt">vpt</option>
                <option value="lcp">lcp</option>
                <option value="prod">prod</option>
            </select>
            <button name="apisubmit" type="submit" onclick="loadData()">Fetch Details</button>
        </form>

        <textarea name="apijson" id="apijson">
           
        </textarea>

        <footer style="text-align: center; font-size: small;">
            Author: Mayank Singh Rathore
        </footer>
    </body>
    <script> 
        //fetching data from apis.json and storing it in an array
        
        function loadData(){
	    var apiArray = []; 
	    var newArray = []; 
		
	    var apiNameSelect = document.getElementById("apiname");
	    var apiName = apiNameSelect.options[apiNameSelect.selectedIndex].value;
		
            var apiEnvSelect = document.getElementById("apienv");
            var apiEnv = apiEnvSelect.options[apiEnvSelect.selectedIndex].value;
		
		console.log(apiName);
		console.log(apiEnv);
		
            fetch("data/apis.json")
                .then(response => {
                return response.json();
            })
                .then(jsondata => {
		    for(var i in jsondata)
                    apiArray.push([i, jsondata [i]]); 
		    
		    const n = apiArray.length; 
		    console.log(n); 
		    
		    for(var i = 0; i < n; i++){
			    for( var j = 1; j < 2; j++){
				    if(apiName == apiArray[i][j].apiname && apiEnv == apiArray[i][j].env){
					    JSON.stringify(apiArray[i][j]); 
					    console.log(apiArray[i][j]);
				    }
			    }
		    }   
            });   
        } 
    </script>
</html>
